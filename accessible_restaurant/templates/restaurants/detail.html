{% extends "base.html" %}

{% block staticlink %}
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'accessible_restaurant/detail_style.css' %}">
	<script src="https://kit.fontawesome.com/6a247440d5.js" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
{% endblock %}

{% block title %} Restaurant Detail Page {% endblock %}

{% block body %}<body class="subpage">{% endblock %}

{% block content %}
	<section id="main" class="wrapper">
		<div class="inner">
			<div class="row 200%">
				<div class="8u 12u$(medium)">
					<header>
						<ul class="actions">
							<li><h2><strong>{{ restaurant.name }}</strong></h2></li>
							{% if restaurant.compliant %}
								<li><h4><i class="icon far fa-check-circle"></i>compliant</h4></li>
							{% else %}
								<li><h4><i class="icon far fa-times-circle"></i>compliant</h4></li>
							{% endif %}
						</ul>
						<ul class="icons">
							{% for _ in full %}
								<li><i class="icon fas fa-star"></i></li>
							{% endfor %}
							{% for _ in half %}
								<li><i class="icon fas fa-star-half-alt"></i></li>
							{% endfor %}
							{% for _ in null %}
								<li><i class="icon far fa-star"></i></li>
							{% endfor %}
							<li><h4>{{ restaurant_data.review_count}} Reviews</h4></li>
						</ul>
						<ul class="actions">
							<li><a href="#" class="button special"><i class="far fa-edit"></i>Write a review</a></li>
						</ul>
					</header>

					<hr />
					<h2>About the restaurant</h2>
					<ul>
						<li><strong>Price:</strong> {{ restaurant_data.price }}</li>
						<li>
							<strong>Categories:</strong>
							{% for category in restaurant_data.categories %}
								{% if forloop.counter == restaurant_data.categories|length %}
									{{ category.title }}
								{% else %}
									{{ category.title }},
								{% endif %}
							{% endfor %}
						</li>
					</ul>
					<hr />

					<h2>Accessible Services</h2>
					<div class="row uniform">
						<div class="4u 12u$(small)">
							<p><i class="icon fas fa-check-square" id="checklist1"></i>Level entry or ramp</p>
						</div>
						<div class="4u 12u$(small)">
							<p><i class="icon fas fa-check-square" id="checklist2"></i>32-inch wide door</p>
						</div>
						<div class="4u 12u$(small)">
							<p><i class="icon fas fa-check-square" id="checklist3"></i>Accessible tables</p>
						</div>
					</div>
					<div class="row uniform">
						<div class="4u 12u$(small)">
							<p><i class="icon fas fa-check-square" id="checklist5"></i>Accessible restroom</p>
						</div>
						<div class="6u 12u$(small)">
							<p><i class="icon fas fa-times-circle" id="checklist4"></i>Accessible 36-inch wide path</p>
						</div>
					</div>

					<hr />
					<h2>Recommended Reviews</h2>
					{% for review in restaurant_review.reviews %}
						<div class="row uniform">
							<div class="3u 12u$(medium)">
								<div class="row uniform">
									<span class="image fit"><img src="{{ review.user.image_url }}" alt="" /></span>
								</div>
								<div class="row">
									<h4><a href="{{ review.user.profile_url }}">{{ review.user.name }}</a></h4>
								</div>
							</div>
							<div class="9u 12u$(medium)">
								<div class="row uniform">
									<ul class="icons">
										{% for _ in review.full %}
											<li><i class="icon fas fa-star"></i></li>
										{% endfor %}
										{% for _ in review.half %}
											<li><i class="icon fas fa-star-half-alt"></i></li>
										{% endfor %}
										{% for _ in review.null %}
											<li><i class="icon far fa-star"></i></li>
										{% endfor %}
										<li><h4>{{ review.time_created }}</h4></li>
									</ul>
								</div>
								<div class="row uniform">
									<p><a href="{{ review.url }}">{{ review.text }}</a></p>
								</div>
<!--								<div class="row uniform">-->
<!--									<span class="image fit"><img src="{{ review.user.image_url }}" alt="" /></span>-->
<!--								</div>-->
							</div>
						</div>
					{% endfor %}
				</div>

				<div class="4u$ 12u$(medium)">
					<h2>Open Hours</h2>
					<ul>
						{% if is_open_now %}
							<li class="no-bullets"><i class="icon fas fa-check-circle"></i>Open Now</li>
						{% else %}
							<li class="no-bullets"><i class="icon fas fa-times-circle"></i>Closed</li>
						{% endif %}
						{% for hour_data in hours %}
							<li>{{ hour_data.weekday }} &emsp; {{ hour_data.start }}-{{ hour_data.end }}</li>
						{% endfor %}
					</ul>
					<h2>Contact Info</h2>
					<ul class="alt">
						<li><i class="icon fas fa-phone-square-alt"></i>{{ restaurant_data.display_phone }}</li>
						<li><i class="icon fas fa-map-marker-alt"></i>{{ restaurant_data.location.address1 }}, {{ restaurant_data.location.city }}, {{ restaurant_data.location.state }} {{ restaurant_data.location.zip_code }}</li>
					</ul>
					<h2>Pictures</h2>
						<!-- Slideshow -->
						<div class="w3-container">
							{% for image in restaurant_data.photos %}
							<div class="w3-display-container mySlides">
							  	<img src="{{ image }}" style="width:100%">
							</div>
							{% endfor %}
							<!-- Slideshow next/previous buttons -->
							<div class="w3-container w3-green w3-padding w3-large">
								<div class="w3-left" onclick="plusDivs(-1)"><i class="fa fa-arrow-circle-left w3-hover-text-teal"></i></div>
								<div class="w3-right" onclick="plusDivs(1)"><i class="fa fa-arrow-circle-right w3-hover-text-teal"></i></div>
							</div>
						</div>
<!--					<span class="image fit"><img src="{{ restaurant.image_url }}" alt="" /></span>-->
				</div>
			</div>
		</div>
	</section>
	<script>
		// Slideshow
		var slideIndex = 1;
		showDivs(slideIndex);

		function plusDivs(n) {
		  showDivs(slideIndex += n);
		}

		function currentDiv(n) {
		  showDivs(slideIndex = n);
		}

		function showDivs(n) {
		  var i;
		  var x = document.getElementsByClassName("mySlides");
		  var dots = document.getElementsByClassName("demodots");
		  if (n > x.length) {slideIndex = 1}
		  if (n < 1) {slideIndex = x.length} ;
		  for (i = 0; i < x.length; i++) {
			x[i].style.display = "none";
		  }
		  for (i = 0; i < dots.length; i++) {
			dots[i].className = dots[i].className.replace(" w3-white", "");
		  }
		  x[slideIndex-1].style.display = "block";
		  dots[slideIndex-1].className += " w3-white";
		}
	</script>
{% endblock %}